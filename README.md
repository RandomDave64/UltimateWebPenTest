# UltimateWebPenTest
This is my first attempt at building a GitHub repo, so be nice.

When finished the attached scripts should allow you to build a self contained Web Pen Testing Lab with multiple targets to practice on.

Each target is a self contained docker container with a vulnerable web application inside it.

I will also attach a deployable web based front end so you can navigate and access each container both for practice and to verify that it's accessible.

My test build was created on Ubuntu Server LTS 20.04, but should work on any Debian system that supports docker.

Total build size for the VM when complete was around 24GB.

This project was inspired by WebSploit labs by Oamr Santos. https://websploit.org/

Omar's lab is designed to be encapsulated inside a Kali or Parrot Linux build. 

I wanted it to stand alone, which then allows any offensive security distro to be used at any time without rebuilding it.

This also allows multiple users to attack it simultaneously if required.

System Requiremnts
------------------
My test build was a Ubuntu Server LTS 20.04 VM
* 2 CPU 
* 4GB RAM (Runs at about 75% use, so increase if you have RAM to spare).
* 80GB HDD (Thin Provisioned and used about 24GB when running).

---------------------------------------------------------------------------------------------------------------------------
Installation 
---------------------------------------------------------------------------------------------------------------------------
Git clone the repo to your home folder
* cd UltimateWebPenTest
* run ./install.sh to execute the deployment script, this will:
 * * Install docker.io, docker-compose and apache2.
 * * Update the /etc/issue file so it displays the VM IP Address when loaded*. 
 * *This assumes the IPv4 interface is **ens32** so you might need to edit /etc/issue if your VM has a different interface ID. eg. when running in VirtualBox.
 * * Copy the Web Front end to the apache home directory
 * * pull the docker images from hub.docker.com
 * * run the docker images, remap the default web ports and ensure each container will run on start-up.
 
To access the front page just browse to the VMs IP Address. http://x.x.x.x

Note: on boot you might have to wait a minute or two for all the web apps to load and successfully start before accessing them.

-------------------------------------
Issues when you first build the image
-------------------------------------
Some of the web apps require additional configuration after they're deployed.
1. OWASP WebGaot.net: setup the Database with the following settings
--------------------------------------------------------------------
* Data Provider: Sqlite
* Data File Path: db.sqlite3
* Client Executable: /usr/bin/sqlite3
![WebGaot.net-setup](https://raw.githubusercontent.com/appsecco/owasp-webgoat-dot-net-docker/master/images/webgoat-setup.png)
2. OWASP Mutillidae 2
-------------------------
* Click setup/reset the DB

3. bWapp - An Extremely Buggy Web App
-----------------------
* goto http://ip-address-of-your-vm:8085/install.php
* click on "Click here to install bWapp

![bWapp-Install](https://1.bp.blogspot.com/-AKzO-IN_w7Y/XkN94NrbkPI/AAAAAAAABzY/svefKcfgqHwa-_0Stj0Gjt-kKwrqSaB7gCEwYBhgL/s1600/Screenshot_2020-02-01_01-36-01.webp)

4. Vulnerable Wordpress
------
* complete the installation by selecting the language and other configuration settings

Other temperamental Web Apps:
-----------
5. WebWolf - This sometimes fails to start even though the Webgoat app is running fine. 
----------
* Login into the VM and run the following commands to locate and restart the container:
* sudo docker PS
* find the alpha-numeric CONTAINER-ID for "santosomar/webgoat" 
* enter "sudo docker stop CONTAINER-ID"
* to retart the container type the following:
* sudo docker run -it -d --restart unless-stopped -p 9090:9090 -p 9080:8080 santosomar/webgoat

-----
6. secretcorp-branch1 - I suspect this one may need more memory as it sometimes works, sometimes doesn't.
-----
* Login into the VM and run the following commands to locate and restart the container:
* sudo docker PS
* find the alpha-numeric CONTAINER-ID for "santosomar/secretcorp-branch1" 
* enter "sudo docker stop CONTAINER-ID"
* to retart the container type the following:
* sudo docker run -it -d --restart unless-stopped -p 8091:80 santosomar/secretcorp-branch1

